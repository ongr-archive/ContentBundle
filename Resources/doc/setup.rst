Content Bundle setup
====================

Step 1: Install Content bundle
------------------------------

Content bundle is installed using `Composer <https://getcomposer.org>`_.

.. code-block:: bash

    php composer.phar require ongr/content-bundle
    
..

Elasticsearch bundle
~~~~~~~~~~~~~~~~~~~~

.. note:: This requires Elasticsearch bundle, guide on how to install it
 can be found in ESB :doc:`/components/ElasticsearchBundle/setup`.


Step 2: Enable Content bundle
-----------------------------

Enable Content bundle in your AppKernel:

.. code-block:: php

    <?php
    // app/AppKernel.php
    
    public function registerBundles()
    {
        $bundles = array(
            // ...
            // Elasticsearch bundle - should be already added.
            new ONGR\ElasticsearchBundle\ONGRElasticsearchBundle(),
            // The lines you need to add.
            new ONGR\RouterBundle\ONGRRouterBundle(),
            new ONGR\ContentBundle\ONGRContentBundle(),
        );  
    }

..

Step 3: Add configuration for bundle
------------------------------------

Add minimal configuration for Content bundle.

.. code-block:: yaml

    #app/config/config.yml
    ongr_content:
        es:
            repositories:
                product: es.manager.default.product
                content: es.manager.default.content
                category: es.manager.default.category

..

In this example, we have set repositories which will be used to fetch data.

.. note::

    Repositories are being generated by ElasticsearchBundle. More information about repositories is available in
    ESB :doc:`/components/ElasticsearchBundle/usage`

..

Step 4: Add routing configuration
---------------------------------

Add content bundle routing to you app routing.

.. code-block:: yaml

    # app/config/routing.yml
    content:
        resource: "@ONGRContentBundle/Resources/config/routing.yml"
        prefix: /

..

Step 5: Adding category fields
------------------------------

To let our services work with your documents you have to extend AbstractCategoryDocument in your category document.

.. code-block:: php

    class Category extends AbstractCategoryDocument
    {
        // AbstractCategoryDocument has required public properties like: active, hidden, parentId, etc.

        // Other fields ...
    }

..
