<ul>
    {% for category in categories %}
        <li class="level-{{ category.level }}{% if category.current %} current{% endif %}{% if category.hasVisibleChildren() %} has-children{% endif %}">
            <span>{{ category.title }}</span>
            {% if category.expanded %}
                {{ renderCategoryTree(category.children) }}
            {% endif %}
        </li>
    {% endfor %}
</ul>
